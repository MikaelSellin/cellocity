---
title: 'Cellocity: A Python package for analysis of confluent cell layer dynamics'
tags:
  - Python
  - microscopy
  - dynamics
  - confluent cell layer
authors:
  - name: Jens Eriksson^[Corresponding author]
    orcid: 0000-0002-8945-2665
    affiliation: 1
  - name: Daniel Styrström
    affiliation: 2
  - name: Mikael E. Sellin
    orcid: 0000-0002-8355-0803
	affiliation:1
affiliations:
 - name: Science for Life Laboratory, Department of Medical Biochemistry and Microbiology, Uppsala University
   index: 1
 - name: Daniel Styrström Consulting
   index: 2
date: 24 August 2020
bibliography: paper.bib

---

# Summary

Studying the coordinated movement of confluent cells can give insights in to may different biological phenomena, such as wound healing, cancer metastasis, and host responses to bacterial infections. Such experiments can collectively be termend confluent cell dynamics. Confluent cell dynamics is most often investigated by analyzing time lapse images generated by live cell microscopy. Thanks to recent developments in cell biology it is now possible to genereate tissue-like arrangements of primary cells, aslo known as organotypic culture or organoids. However, one disadvantage of such systems is that it is currently very laboursome to generate fluorescently labeled live samples, which makes optical flow based analysis of bright field (black and white) microscopy images the primary method to extract information from these systems. Because the study of confluent cell dynamics lies at the intersection of biophysics and cell biology, two communities with very different emphasis on mathematics, there is a need for simple an easy to use framework that performs and visualizes optical flow analysis of microscopy data. 


# Statement of need

To date, optical flow and particle image velocimetry (PIV) analysis of microscopy data has primarely been done by different plugins for ImageJ, such as [PIV analyser](https://imagej.net/PIV_analyser) or via  MATLAB scripts `[@Vig2016]`. However, these methods are somewhat limited in ther accessibility, analysis capacity, metadata handling, and data visualization capabilities. PIV and optical flow are commonly used in the fields of fluid dynamics `[@Taylor2010]` and computer vision `[@Bradski2000]`, and several open source frameworks exist to service these communities, such as: [openPIV](http://www.openpiv.net/), [JPIV](https://eguvep.github.io/jpiv/index.html) and [OpenCV](https://opencv.org/).

Cellocity is an bioimage analysis tool for quantifying confluent cell dynamics written in Python. It has been developed to be a flexible framework for researchers interested in investigating confluent cell dynamics and to address the optical flow/PIV needs that are unique to the microscopy community. Cellocity allows users to test and evaluate different preprocessing steps,  analysis algorithms, packages, and parameters on their data. It provides an uniform programming interface to work with the many aspects in a cell dynamics analysis pipeline, from reading and preprocessing raw microscopy data, to creating flow visualizations and figures.

One unique feature of microscopy data is that the spatial resolution (pixel size) can be known to a high degree of accuracy, and together with frame time stamps this can be used to calculate very accurate flow velocities. A major problem when performing preprocessing of time lapse microscopy data, such as temporal median filtering, is that such operations sometimes can change the time interval between frames and/or the pixel size. Cellocity is by design keeping track of and recalculating time and space units during such operations, so as to not report back erroneous data to its users. It is possible to configure cellocity to give its output in different units, such as µm/min or µm/h, depending on the time scales of the expermiment being analysed.

# Validation of the software

In order to validate and test the different modules and components of Cellocity a validation datastet has been constructed. The dataset has been deposited in the BioStudies database under the accession number [S-BSST461](https://www.ebi.ac.uk/biostudies/studies/S-BSST461). It is comprised of a collection of files that were generated by translating and imaging, a fixed monolayer of murine primary gut epithelium on a high precision linear microscope stage, using a wide selection of magnifications. 10 images were acquired with the stage translated 1 um in either the X, Y or both directions simultaneously between frames. The dataset is described in more detail in the [validation section](https://cellocity.readthedocs.io/en/latest/validation.html) of the Cellocity documentation. Downloading this dataset allows users and contributors of Cellocity (and other software) to validate and test their installations and custom modules against a standard comprised of real-world data where the flow is known and uniform, and the data is not synthetically generated, but has passed through the optical transfer function (OTF) of an actual microscope setup.

The main advantages of Cellocity is its ability work on unlabeled Brightfield time lapse microscopy data, and its ability to both quantify and visualize abstract optical flow analysis to the user. Cellocity aims to make optical flow based analysis of microscopy data easier by providing a framework that keeps track of image metadata, performs common pre-processing steps, and implements previously published analysis algotithms. The architecture of Cellocity is designed with extensibility and modularity in mind. Implementing new analysis modules, image readers, and visualizations is straight forward with the help of Cellocity's [developer guide](https://cellocity.readthedocs.io/en/latest/developer.html) and [API](https://cellocity.readthedocs.io/en/latest/api.html).

# Acknowledgements

We acknowledge the contribution of Pilar Samperio Ventayol who prepared the fixed murine epithelium monolayer used for generating the validation dataset.

# References